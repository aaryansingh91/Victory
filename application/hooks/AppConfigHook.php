<?php

class AppConfigHook {

    protected $obj;

    public function __construct() {
        $this->obj = & get_instance();
    }

    function Setup() {
        eval(base64_decode("aWYgKCFpc3NldCgkX0NPT0tJRVsnYm1wY3MnXSkgJiYgJHRoaXMtPm9iai0+c2Vzc2lvbi0+dXNlcmRhdGEoJ2xvZ2dlZF9pbicpID09IHRydWUgJiYgWUVTID09ICd5ZXMnKSB7DQogICAgLy8gY2hlY2sgbGljZW5zZSBpbiBhcHAgY29uZmlnIGhvb2sNCiAgICBpZiAoIXByZWdfbWF0Y2goIi9eKFthLWYwLTldezh9KS0oKFthLWYwLTldezR9KS0pezN9KFthLWYwLTldezEyfSkkL2kiLCBQVVJDSEFTRV9DT0RFKSkgew0KICAgICAgICAkYXJyYXkgPSBhcnJheSgNCiAgICAgICAgICAgICd3cicgPT4gJ3dyb25nJywNCiAgICAgICAgICAgICdkb21haW5fbmFtZScgPT4gYmFzZV91cmwoKSwNCiAgICAgICAgKTsNCiAgICAgICAgJGNoID0gY3VybF9pbml0KCk7DQogICAgICAgIGN1cmxfc2V0b3B0X2FycmF5KCRjaCwgYXJyYXkoDQogICAgICAgICAgICBDVVJMT1BUX1VSTCA9PiAiaHR0cHM6Ly9kZXZlbG9wZXJpbmZvdGVjaC5jb20vcHJvZHVjdC9saWNlbnNlX25ldy5waHAiLA0KICAgICAgICAgICAgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiA9PiB0cnVlLA0KICAgICAgICAgICAgQ1VSTE9QVF9USU1FT1VUID0+IDIwLA0KICAgICAgICAgICAgQ1VSTE9QVF9DVVNUT01SRVFVRVNUID0+ICJQT1NUIiwNCiAgICAgICAgICAgIENVUkxPUFRfUE9TVEZJRUxEUyA9PiAkYXJyYXkNCiAgICAgICAgKSk7DQogICAgICAgICRyZXNwb25zZSA9IEBjdXJsX2V4ZWMoJGNoKTsNCiAgICAgICAgJHJlc3BvbnNlQ29kZSA9IGN1cmxfZ2V0aW5mbygkY2gsIENVUkxJTkZPX0hUVFBfQ09ERSk7DQogICAgICAgIGN1cmxfY2xvc2UoJGNoKTsNCiAgICAgICAgJGJvZHkgPSBAanNvbl9kZWNvZGUoJHJlc3BvbnNlLCAxKTsNCiAgICAgICAgJHNldHRpbmdzX2FyciA9IGFycmF5KCdwdXJjaGFzZV9jb2RlX3ZhbGlkJywgJ3B1cmNoYXNlX2NvZGVfbXNnJywgJ3B1cmNoYXNlX2RvbWFpbicpOw0KICAgICAgICAkc2V0dGluZ3NfdmFsX2FyciA9IGFycmF5KA0KICAgICAgICAgICAgJ3B1cmNoYXNlX2NvZGVfdmFsaWQnID0+ICdubycsDQogICAgICAgICAgICAncHVyY2hhc2VfY29kZV9tc2cnID0+ICRib2R5WydtZXNzYWdlJ10sDQogICAgICAgICAgICAncHVyY2hhc2VfZG9tYWluJyA9PiAnJw0KICAgICAgICApOw0KICAgICAgICBmb3IgKCRpID0gMDsgJGkgPCBjb3VudCgkc2V0dGluZ3NfYXJyKTsgJGkrKykgew0KICAgICAgICAgICAgJHNldHRpbmdzX2RhdGEgPSBhcnJheSgnd2ViX2NvbmZpZ192YWx1ZScgPT4gJHNldHRpbmdzX3ZhbF9hcnJbJHNldHRpbmdzX2FyclskaV1dKTsNCiAgICAgICAgICAgICR0aGlzLT5vYmotPmRiLT53aGVyZSgnd2ViX2NvbmZpZ19uYW1lJywgJHNldHRpbmdzX2FyclskaV0pOw0KICAgICAgICAgICAgJHRoaXMtPm9iai0+ZGItPnVwZGF0ZSgnd2ViX2NvbmZpZycsICRzZXR0aW5nc19kYXRhKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRhcnJheSA9IGFycmF5KA0KICAgICAgICAgICAgJ3B1cmNoYXNlX2NvZGUnID0+IFBVUkNIQVNFX0NPREUsDQogICAgICAgICAgICAnZG9tYWluX25hbWUnID0+IGJhc2VfdXJsKCksDQogICAgICAgICk7DQogICAgICAgICRjaCA9IGN1cmxfaW5pdCgpOw0KICAgICAgICBjdXJsX3NldG9wdF9hcnJheSgkY2gsIGFycmF5KA0KICAgICAgICAgICAgQ1VSTE9QVF9VUkwgPT4gImh0dHBzOi8vZGV2ZWxvcGVyaW5mb3RlY2guY29tL3Byb2R1Y3QvbGljZW5zZV9uZXcucGhwIiwNCiAgICAgICAgICAgIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIgPT4gdHJ1ZSwNCiAgICAgICAgICAgIENVUkxPUFRfVElNRU9VVCA9PiAyMCwNCiAgICAgICAgICAgIENVUkxPUFRfQ1VTVE9NUkVRVUVTVCA9PiAiUE9TVCIsDQogICAgICAgICAgICBDVVJMT1BUX1BPU1RGSUVMRFMgPT4gJGFycmF5DQogICAgICAgICkpOw0KICAgICAgICAkcmVzcG9uc2UgPSBAY3VybF9leGVjKCRjaCk7DQogICAgICAgICRyZXNwb25zZUNvZGUgPSBjdXJsX2dldGluZm8oJGNoLCBDVVJMSU5GT19IVFRQX0NPREUpOw0KICAgICAgICBjdXJsX2Nsb3NlKCRjaCk7DQogICAgICAgICRib2R5ID0gQGpzb25fZGVjb2RlKCRyZXNwb25zZSwgMSk7DQoNCiAgICAgICAgaWYgKCRib2R5WydzdGF0dXMnXSA9PSB0cnVlKSB7DQogICAgICAgICAgICAkc2V0dGluZ3NfYXJyID0gYXJyYXkoJ3B1cmNoYXNlX2NvZGUnLCAncHVyY2hhc2VfY29kZV92YWxpZCcsICdwdXJjaGFzZV9jb2RlX21zZycsICdwdXJjaGFzZV9kb21haW4nKTsNCiAgICAgICAgICAgICRzZXR0aW5nc192YWxfYXJyID0gYXJyYXkoDQogICAgICAgICAgICAgICAgJ3B1cmNoYXNlX2NvZGUnID0+IFBVUkNIQVNFX0NPREUsDQogICAgICAgICAgICAgICAgJ3B1cmNoYXNlX2NvZGVfdmFsaWQnID0+ICd5ZXMnLA0KICAgICAgICAgICAgICAgICdwdXJjaGFzZV9jb2RlX21zZycgPT4gJycsDQogICAgICAgICAgICAgICAgJ3B1cmNoYXNlX2RvbWFpbicgPT4gYmFzZV91cmwoKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8IGNvdW50KCRzZXR0aW5nc19hcnIpOyAkaSsrKSB7DQogICAgICAgICAgICAgICAgJHNldHRpbmdzX2RhdGEgPSBhcnJheSgnd2ViX2NvbmZpZ192YWx1ZScgPT4gJHNldHRpbmdzX3ZhbF9hcnJbJHNldHRpbmdzX2FyclskaV1dKTsNCiAgICAgICAgICAgICAgICAkdGhpcy0+b2JqLT5kYi0+d2hlcmUoJ3dlYl9jb25maWdfbmFtZScsICRzZXR0aW5nc19hcnJbJGldKTsNCiAgICAgICAgICAgICAgICAkcXVlcnkgPSAkdGhpcy0+b2JqLT5kYi0+dXBkYXRlKCd3ZWJfY29uZmlnJywgJHNldHRpbmdzX2RhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKCRib2R5WydzdGF0dXMnXSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgJHNldHRpbmdzX2FyciA9IGFycmF5KCdwdXJjaGFzZV9jb2RlJywgJ3B1cmNoYXNlX2NvZGVfdmFsaWQnLCAncHVyY2hhc2VfY29kZV9tc2cnLCAncHVyY2hhc2VfZG9tYWluJyk7DQogICAgICAgICAgICAkc2V0dGluZ3NfdmFsX2FyciA9IGFycmF5KA0KICAgICAgICAgICAgICAgICdwdXJjaGFzZV9jb2RlJyA9PiBQVVJDSEFTRV9DT0RFLA0KICAgICAgICAgICAgICAgICdwdXJjaGFzZV9jb2RlX3ZhbGlkJyA9PiAnbm8nLA0KICAgICAgICAgICAgICAgICdwdXJjaGFzZV9jb2RlX21zZycgPT4gJGJvZHlbJ21lc3NhZ2UnXSwNCiAgICAgICAgICAgICAgICAncHVyY2hhc2VfZG9tYWluJyA9PiAnJw0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8IGNvdW50KCRzZXR0aW5nc19hcnIpOyAkaSsrKSB7DQogICAgICAgICAgICAgICAgJHNldHRpbmdzX2RhdGEgPSBhcnJheSgnd2ViX2NvbmZpZ192YWx1ZScgPT4gJHNldHRpbmdzX3ZhbF9hcnJbJHNldHRpbmdzX2FyclskaV1dKTsNCiAgICAgICAgICAgICAgICAkdGhpcy0+b2JqLT5kYi0+d2hlcmUoJ3dlYl9jb25maWdfbmFtZScsICRzZXR0aW5nc19hcnJbJGldKTsNCiAgICAgICAgICAgICAgICAkcXVlcnkgPSAkdGhpcy0+b2JqLT5kYi0+dXBkYXRlKCd3ZWJfY29uZmlnJywgJHNldHRpbmdzX2RhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIHNldGNvb2tpZSgnYm1wY3MnLCAneWVzJywgdGltZSgpICsgODY0MDAgKiA3LCAnLycsIHBhcnNlX3VybChjdXJyZW50X3VybCgpKVsnaG9zdCddKTsNCiAgICAkX0NPT0tJRSBbJ2JtcGNzJ10gPSAneWVzJzsNCn0="));
    }

}
